(function(b,g){var d={};function c(m,n){var l,j=[];for(var k=0;k<m.length;++k){l=d[m[k]]||e(m[k]);if(!l){throw"module definition dependecy not found: "+m[k]}j.push(l)}n.apply(null,j)}function h(k,j,i){if(typeof k!=="string"){throw"invalid module definition, module id must be defined and be a string"}if(j===g){throw"invalid module definition, dependencies must be specified"}if(i===g){throw"invalid module definition, definition function must be specified"}c(j,function(){d[k]=i.apply(null,arguments)})}function f(i){return !!d[i]}function e(l){var j=b;var i=l.split(/[.\/]/);for(var k=0;k<i.length;++k){if(!j[i[k]]){return}j=j[i[k]]}return j}function a(l){for(var k=0;k<l.length;k++){var m=b;var o=l[k];var j=o.split(/[.\/]/);for(var n=0;n<j.length-1;++n){if(m[j[n]]===g){m[j[n]]={}}m=m[j[n]]}m[j[j.length-1]]=d[o]}}h("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env"],function(k,j){var l=k.each;function i(n,m){return parseInt(n.getAttribute(m)||1,10)}return function(u,M){var n,Q,I,v,P=u.selection,L=P.dom;function A(){var R=0;n=[];l(["thead","tbody","tfoot"],function(S){var T=L.select("> "+S+" tr",M);l(T,function(U,V){V+=R;l(L.select("> td, > th",U),function(ab,W){var X,Y,Z,aa;if(n[V]){while(n[V][W]){W++}}Z=i(ab,"rowspan");aa=i(ab,"colspan");for(Y=V;Y<V+Z;Y++){if(!n[Y]){n[Y]=[]}for(X=W;X<W+aa;X++){n[Y][X]={part:S,real:Y==V&&X==W,elm:ab,rowspan:Z,colspan:aa}}}})});R+=T.length})}function F(S,R){S=S.cloneNode(R);S.removeAttribute("id");return S}function E(R,T){var S;S=n[T];if(S){return S[R]}}function z(T,R,S){if(T){S=parseInt(S,10);if(S===1){T.removeAttribute(R,1)}else{T.setAttribute(R,S,1)}}}function p(R){return R&&(L.hasClass(R.elm,"mce-item-selected")||R==v)}function q(){var R=[];l(M.rows,function(S){l(S.cells,function(T){if(L.hasClass(T,"mce-item-selected")||(v&&T==v.elm)){R.push(S);return false}})});return R}function y(){var R=L.createRng();R.setStartAfter(M);R.setEndAfter(M);P.setRng(R);L.remove(M)}function m(R){var T,S={};if(u.settings.table_clone_elements!==false){S=k.makeMap((u.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)}k.walk(R,function(V){var U;if(V.nodeType==3){l(L.getParents(V.parentNode,null,R).reverse(),function(W){if(!S[W.nodeName]){return}W=F(W,false);if(!T){T=U=W}else{if(U){U.appendChild(W)}}U=W});if(U){U.innerHTML=j.ie?"&nbsp;":'<br data-mce-bogus="1" />'}return false}},"childNodes");R=F(R,false);z(R,"rowSpan",1);z(R,"colSpan",1);if(T){R.appendChild(T)}else{if(!j.ie){R.innerHTML='<br data-mce-bogus="1" />'}}return R}function x(){var R=L.createRng(),S;l(L.select("tr",M),function(T){if(T.cells.length===0){L.remove(T)}});if(L.select("tr",M).length===0){R.setStartBefore(M);R.setEndBefore(M);P.setRng(R);L.remove(M);return}l(L.select("thead,tbody,tfoot",M),function(T){if(T.rows.length===0){L.remove(T)}});A();if(Q){S=n[Math.min(n.length-1,Q.y)];if(S){P.select(S[Math.min(S.length-1,Q.x)].elm,true);P.collapse(true)}}}function B(X,V,Z,W){var U,S,R,T,Y;U=n[V][X].elm.parentNode;for(R=1;R<=Z;R++){U=L.getNext(U,"tr");if(U){for(S=X;S>=0;S--){Y=n[V+R][S].elm;if(Y.parentNode==U){for(T=1;T<=W;T++){L.insertAfter(m(Y),Y)}break}}if(S==-1){for(T=1;T<=W;T++){U.insertBefore(m(U.cells[0]),U.cells[0])}}}}}function H(){l(n,function(R,S){l(R,function(U,T){var X,W,V;if(p(U)){U=U.elm;X=i(U,"colspan");W=i(U,"rowspan");if(X>1||W>1){z(U,"rowSpan",1);z(U,"colSpan",1);for(V=0;V<X-1;V++){L.insertAfter(m(U),U)}B(T,S,W-1,X)}}})})}function w(ab,Y,ae){var X,U,T,ad,ac,aa,W,Z,R,S,V;if(ab){X=K(ab);U=X.x;T=X.y;ad=U+(Y-1);ac=T+(ae-1)}else{Q=I=null;l(n,function(af,ag){l(af,function(ai,ah){if(p(ai)){if(!Q){Q={x:ah,y:ag}}I={x:ah,y:ag}}})});if(Q){U=Q.x;T=Q.y;ad=I.x;ac=I.y}}Z=E(U,T);R=E(ad,ac);if(Z&&R&&Z.part==R.part){H();A();Z=E(U,T).elm;z(Z,"colSpan",(ad-U)+1);z(Z,"rowSpan",(ac-T)+1);for(W=T;W<=ac;W++){for(aa=U;aa<=ad;aa++){if(!n[W]||!n[W][aa]){continue}ab=n[W][aa].elm;if(ab!=Z){S=k.grep(ab.childNodes);l(S,function(af){Z.appendChild(af)});if(S.length){S=k.grep(Z.childNodes);V=0;l(S,function(af){if(af.nodeName=="BR"&&L.getAttrib(af,"data-mce-bogus")&&V++<S.length-1){Z.removeChild(af)}})}L.remove(ab)}}}x()}}function r(V){var R,X,U,W,Y,Z,S,aa,T;l(n,function(ab,ac){l(ab,function(ad){if(p(ad)){ad=ad.elm;Y=ad.parentNode;Z=F(Y,false);R=ac;if(V){return false}}});if(V){return !R}});if(R===g){return}for(W=0;W<n[0].length;W++){if(!n[R][W]){continue}X=n[R][W].elm;if(X!=U){if(!V){T=i(X,"rowspan");if(T>1){z(X,"rowSpan",T+1);continue}}else{if(R>0&&n[R-1][W]){aa=n[R-1][W].elm;T=i(aa,"rowSpan");if(T>1){z(aa,"rowSpan",T+1);continue}}}S=m(X);z(S,"colSpan",X.colSpan);Z.appendChild(S);U=X}}if(Z.hasChildNodes()){if(!V){L.insertAfter(Z,Y)}else{Y.parentNode.insertBefore(Z,Y)}}}function o(S){var T,R;l(n,function(U){l(U,function(W,V){if(p(W)){T=V;if(S){return false}}});if(S){return !T}});l(n,function(X,Y){var U,V,W;if(!X[T]){return}U=X[T].elm;if(U!=R){W=i(U,"colspan");V=i(U,"rowspan");if(W==1){if(!S){L.insertAfter(m(U),U);B(T,Y,V-1,W)}else{U.parentNode.insertBefore(m(U),U);B(T,Y,V-1,W)}}else{z(U,"colSpan",U.colSpan+1)}R=U}})}function t(){var R=[];l(n,function(S){l(S,function(U,T){if(p(U)&&k.inArray(R,T)===-1){l(n,function(X){var V=X[T].elm,W;W=i(V,"colSpan");if(W>1){z(V,"colSpan",W-1)}else{L.remove(V)}});R.push(T)}})});x()}function s(){var S;function R(V){var U,W,T;U=L.getNext(V,"tr");l(V.cells,function(X){var Y=i(X,"rowSpan");if(Y>1){z(X,"rowSpan",Y-1);W=K(X);B(W.x,W.y,1,1)}});W=K(V.cells[0]);l(n[W.y],function(X){var Y;X=X.elm;if(X!=T){Y=i(X,"rowSpan");if(Y<=1){L.remove(X)}else{z(X,"rowSpan",Y-1)}T=X}})}S=q();l(S.reverse(),function(T){R(T)});x()}function J(){var R=q();L.remove(R);x();return R}function O(){var R=q();l(R,function(T,S){R[S]=F(T,true)});return R}function G(T,S){var U=q(),R=U[S?0:U.length-1],V=R.cells.length;if(!T){return}l(n,function(X){var W;V=0;l(X,function(Y){if(Y.real){V+=Y.colspan}if(Y.elm.parentNode==R){W=1}});if(W){return false}});if(!S){T.reverse()}l(T,function(Z){var X,Y=Z.cells.length,W;for(X=0;X<Y;X++){W=Z.cells[X];z(W,"colSpan",1);z(W,"rowSpan",1)}for(X=Y;X<V;X++){Z.appendChild(m(Z.cells[Y-1]))}for(X=V;X<Y;X++){L.remove(Z.cells[X])}if(S){R.parentNode.insertBefore(Z,R)}else{L.insertAfter(Z,R)}});L.removeClass(L.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected")}function K(R){var S;l(n,function(T,U){l(T,function(W,V){if(W.elm==R){S={x:V,y:U};return false}});return !S});return S}function D(R){Q=K(R)}function N(){var S,R;S=R=0;l(n,function(T,U){l(T,function(W,V){var Y,X;if(p(W)){W=n[U][V];if(V>S){S=V}if(U>R){R=U}if(W.real){Y=W.colspan-1;X=W.rowspan-1;if(Y){if(V+Y>S){S=V+Y}}if(X){if(U+X>R){R=U+X}}}}})});return{x:S,y:R}}function C(Z){var U,T,ab,aa,S,R,V,W,Y,X;I=K(Z);if(Q&&I){U=Math.min(Q.x,I.x);T=Math.min(Q.y,I.y);ab=Math.max(Q.x,I.x);aa=Math.max(Q.y,I.y);S=ab;R=aa;for(X=T;X<=R;X++){Z=n[X][U];if(!Z.real){if(U-(Z.colspan-1)<U){U-=Z.colspan-1}}}for(Y=U;Y<=S;Y++){Z=n[T][Y];if(!Z.real){if(T-(Z.rowspan-1)<T){T-=Z.rowspan-1}}}for(X=T;X<=aa;X++){for(Y=U;Y<=ab;Y++){Z=n[X][Y];if(Z.real){V=Z.colspan-1;W=Z.rowspan-1;if(V){if(Y+V>S){S=Y+V}}if(W){if(X+W>R){R=X+W}}}}}L.removeClass(L.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected");for(X=T;X<=R;X++){for(Y=U;Y<=S;Y++){if(n[X][Y]){L.addClass(n[X][Y].elm,"mce-item-selected")}}}}}M=M||L.getParent(P.getStart(),"table");A();v=L.getParent(P.getStart(),"th,td");if(v){Q=K(v);I=N();v=E(Q.x,Q.y)}k.extend(this,{deleteTable:y,split:H,merge:w,insertRow:r,insertCol:o,deleteCols:t,deleteRows:s,cutRows:J,copyRows:O,pasteRows:G,getPos:K,setStartCell:D,setEndCell:C})}});h("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/Env","tinymce/util/Tools"],function(m,j,k){var l=k.each;function i(o,n){return parseInt(o.getAttribute(n)||1,10)}return function(r){function s(){function t(C){var I=C.keyCode;function A(R,N){var M=R?"previousSibling":"nextSibling";var S=r.dom.getParent(N,"tr");var Q=S[M];if(Q){E(r,N,Q,R);C.preventDefault();return true}else{var T=r.dom.getParent(S,"table");var P=S.parentNode;var L=P.nodeName.toLowerCase();if(L==="tbody"||L===(R?"tfoot":"thead")){var O=v(R,T,P,"tbody");if(O!==null){return x(R,O,N)}}return H(R,S,M,T)}}function v(P,N,O,R){var M=r.dom.select(">"+R,N);var L=M.indexOf(O);if(P&&L===0||!P&&L===M.length-1){return y(P,N)}else{if(L===-1){var Q=O.tagName.toLowerCase()==="thead"?0:M.length-1;return M[Q]}else{return M[L+(P?-1:1)]}}}function y(O,N){var M=O?"thead":"tfoot";var L=r.dom.select(">"+M,N);return L.length!==0?L[0]:null}function x(O,N,M){var L=u(N,O);if(L){E(r,M,L,O)}C.preventDefault();return true}function H(R,O,L,Q){var M=Q[L];if(M){G(M);return true}else{var P=r.dom.getParent(Q,"td,th");if(P){return A(R,P,C)}else{var N=u(O,!R);G(N);C.preventDefault();return false}}}function u(M,L){var N=M&&M[L?"lastChild":"firstChild"];return N&&N.nodeName==="BR"?r.dom.getParent(N,"td,th"):N}function G(L){r.selection.setCursorLocation(L,0)}function D(){return I==m.UP||I==m.DOWN}function F(M){var N=M.selection.getNode();var L=M.dom.getParent(N,"tr");return L!==null}function B(M){var L=0;var N=M;while(N.previousSibling){N=N.previousSibling;L=L+i(N,"colspan")}return L}function w(N,L){var O=0,M=0;l(N.children,function(P,Q){O=O+i(P,"colspan");M=Q;if(O>L){return false}});return M}function E(N,Q,S,P){var R=B(r.dom.getParent(Q,"td,th"));var M=w(S,R);var L=S.childNodes[M];var O=u(L,P);G(O||L)}function K(L){var N=r.selection.getNode();var O=r.dom.getParent(N,"td,th");var M=r.dom.getParent(L,"td,th");return O&&O!==M&&z(O,M)}function z(M,L){return r.dom.getParent(M,"TABLE")===r.dom.getParent(L,"TABLE")}if(D()&&F(r)){var J=r.selection.getNode();setTimeout(function(){if(K(J)){A(!C.shiftKey&&I===m.UP,J,C)}},0)}}r.on("KeyDown",function(u){t(u)})}function n(){function t(v,w){var x=w.ownerDocument,u=x.createRange(),y;u.setStartBefore(w);u.setEnd(v.endContainer,v.endOffset);y=x.createElement("body");y.appendChild(u.cloneContents());return y.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length===0}r.on("KeyDown",function(w){var u,v,x=r.dom;if(w.keyCode==37||w.keyCode==38){u=r.selection.getRng();v=x.getParent(u.startContainer,"table");if(v&&r.getBody().firstChild==v){if(t(u,v)){u=x.createRng();u.setStartBefore(v);u.setEndBefore(v);r.selection.setRng(u);w.preventDefault()}}}})}function p(){r.on("KeyDown SetContent VisualAid",function(){var t;for(t=r.getBody().lastChild;t;t=t.previousSibling){if(t.nodeType==3){if(t.nodeValue.length>0){break}}else{if(t.nodeType==1&&!t.getAttribute("data-mce-bogus")){break}}}if(t&&t.nodeName=="TABLE"){if(r.settings.forced_root_block){r.dom.add(r.getBody(),r.settings.forced_root_block,r.settings.forced_root_block_attrs,j.ie&&j.ie<11?"&nbsp;":'<br data-mce-bogus="1" />')}else{r.dom.add(r.getBody(),"br",{"data-mce-bogus":"1"})}}});r.on("PreProcess",function(u){var t=u.node.lastChild;if(t&&(t.nodeName=="BR"||(t.childNodes.length==1&&(t.firstChild.nodeName=="BR"||t.firstChild.nodeValue=="\u00a0")))&&t.previousSibling&&t.previousSibling.nodeName=="TABLE"){r.dom.remove(t)}})}function o(){function t(A,w,x,C){var y=3,D=A.dom.getParent(w.startContainer,"TABLE");var z,v,B;if(D){z=D.parentNode}v=w.startContainer.nodeType==y&&w.startOffset===0&&w.endOffset===0&&C&&(x.nodeName=="TR"||x==z);B=(x.nodeName=="TD"||x.nodeName=="TH")&&!C;return v||B}function u(){var w=r.selection.getRng();var y=r.selection.getNode();var x=r.dom.getParent(w.startContainer,"TD,TH");if(!t(r,w,y,x)){return}if(!x){x=y}var v=x.lastChild;while(v.lastChild){v=v.lastChild}w.setEnd(v,v.nodeValue.length);r.selection.setRng(w)}r.on("KeyDown",function(){u()});r.on("MouseDown",function(v){if(v.button!=2){u()}})}function q(){r.on("keydown",function(w){if((w.keyCode==m.DELETE||w.keyCode==m.BACKSPACE)&&!w.isDefaultPrevented()){var v=r.dom.getParent(r.selection.getStart(),"table");if(v){var t=r.dom.select("td,th",v),u=t.length;while(u--){if(!r.dom.hasClass(t[u],"mce-item-selected")){return}}w.preventDefault();r.execCommand("mceTableDelete")}}})}q();if(j.webkit){s();o()}if(j.gecko){n();p()}if(j.ie>10){n();p()}}});h("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(j,k,i){return function(q){var s=q.dom,n,r,m,o=true;function l(){q.getBody().style.webkitUserSelect="";if(o){q.dom.removeClass(q.dom.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected");o=false}}function p(x){var v,u,w=x.target;if(r&&(n||w!=r)&&(w.nodeName=="TD"||w.nodeName=="TH")){u=s.getParent(w,"table");if(u==m){if(!n){n=new j(q,u);n.setStartCell(r);q.getBody().style.webkitUserSelect="none"}n.setEndCell(w);o=true}v=q.selection.getSel();try{if(v.removeAllRanges){v.removeAllRanges()}else{v.empty()}}catch(t){}x.preventDefault()}}q.on("MouseDown",function(t){if(t.button!=2){l();r=s.getParent(t.target,"td,th");m=s.getParent(r,"table")}});q.on("mouseover",p);q.on("remove",function(){s.unbind(q.getDoc(),"mouseover",p)});q.on("MouseUp",function(){var v,z=q.selection,u,A,y,x,t;function w(B,D){var C=new k(B,B);do{if(B.nodeType==3&&i.trim(B.nodeValue).length!==0){if(D){v.setStart(B,0)}else{v.setEnd(B,B.nodeValue.length)}return}if(B.nodeName=="BR"){if(D){v.setStartBefore(B)}else{v.setEndBefore(B)}return}}while((B=(D?C.next():C.prev())))}if(r){if(n){q.getBody().style.webkitUserSelect=""}u=s.select("td.mce-item-selected,th.mce-item-selected");if(u.length>0){v=s.createRng();y=u[0];t=u[u.length-1];v.setStartBefore(y);v.setEndAfter(y);w(y,1);A=new k(y,s.getParent(u[0],"table"));do{if(y.nodeName=="TD"||y.nodeName=="TH"){if(!s.hasClass(y,"mce-item-selected")){break}x=y}}while((y=A.next()));w(x);z.setRng(v)}q.nodeChanged();r=n=m=null}});q.on("KeyUp",function(){l()});return{clear:l}}});h("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(p,o,q,i,n,k,j){var m=i.each;function l(t){var r,G,C=this;function w(K){return K?K.replace(/px$/,""):""}function D(K){if(/^[0-9]+$/.test(K)){K+="px"}return K}function J(K){m("left center right".split(" "),function(L){t.formatter.remove("align"+L,{},K)})}function s(){var O=t.dom,K,M,L,N;K=O.getParent(t.selection.getStart(),"table");N={width:w(O.getStyle(K,"width")||O.getAttrib(K,"width")),height:w(O.getStyle(K,"height")||O.getAttrib(K,"height")),cellspacing:K?O.getAttrib(K,"cellspacing"):"",cellpadding:K?O.getAttrib(K,"cellpadding"):"",border:K?O.getAttrib(K,"border"):"",caption:!!O.select("caption",K)[0]};m("left center right".split(" "),function(P){if(t.formatter.matchNode(K,"align"+P)){N.align=P}});if(!K){M={label:"Cols",name:"cols"};L={label:"Rows",name:"rows"}}t.windowManager.open({title:"Table properties",items:{type:"form",layout:"grid",columns:2,data:N,defaults:{type:"textbox",maxWidth:50},items:[M,L,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"},{label:"Alignment",minWidth:90,name:"align",type:"listbox",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]},onsubmit:function(){var Q=this.toJSON(),P;t.undoManager.transact(function(){if(!K){K=A(Q.cols||1,Q.rows||1)}t.dom.setAttribs(K,{cellspacing:Q.cellspacing,cellpadding:Q.cellpadding,border:Q.border});t.dom.setStyles(K,{width:D(Q.width),height:D(Q.height)});P=O.select("caption",K)[0];if(P&&!Q.caption){O.remove(P)}if(!P&&Q.caption){P=O.create("caption");P.innerHTML=!k.ie?'<br data-mce-bogus="1"/>':"\u00a0";K.insertBefore(P,K.firstChild)}J(K);if(Q.align){t.formatter.apply("align"+Q.align,{},K)}t.focus();t.addVisual()})}})}function E(L,K){t.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",size:10},{label:"Rows",name:"rows",type:"textbox",size:10}],onsubmit:function(){var M=this.toJSON();t.undoManager.transact(function(){L.merge(K,M.cols,M.rows)})}})}function v(){var N=t.dom,L,M,K=[];K=t.dom.select("td.mce-item-selected,th.mce-item-selected");L=t.dom.getParent(t.selection.getStart(),"td,th");if(!K.length&&L){K.push(L)}L=L||K[0];if(!L){return}M={width:w(N.getStyle(L,"width")||N.getAttrib(L,"width")),height:w(N.getStyle(L,"height")||N.getAttrib(L,"height")),scope:N.getAttrib(L,"scope")};M.type=L.nodeName.toLowerCase();m("left center right".split(" "),function(O){if(t.formatter.matchNode(L,"align"+O)){M.align=O}});t.windowManager.open({title:"Cell properties",items:{type:"form",data:M,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]},onsubmit:function(){var O=this.toJSON();t.undoManager.transact(function(){m(K,function(P){t.dom.setAttrib(P,"scope",O.scope);t.dom.setStyles(P,{width:D(O.width),height:D(O.height)});if(O.type&&P.nodeName.toLowerCase()!=O.type){P=N.rename(P,O.type)}J(P);if(O.align){t.formatter.apply("align"+O.align,{},P)}});t.focus()})}})}function x(){var P=t.dom,K,M,L,O,N=[];K=t.dom.getParent(t.selection.getStart(),"table");M=t.dom.getParent(t.selection.getStart(),"td,th");m(K.rows,function(Q){m(Q.cells,function(R){if(P.hasClass(R,"mce-item-selected")||R==M){N.push(Q);return false}})});L=N[0];if(!L){return}O={height:w(P.getStyle(L,"height")||P.getAttrib(L,"height")),scope:P.getAttrib(L,"scope")};O.type=L.parentNode.nodeName.toLowerCase();m("left center right".split(" "),function(Q){if(t.formatter.matchNode(L,"align"+Q)){O.align=Q}});t.windowManager.open({title:"Row properties",items:{type:"form",data:O,columns:2,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"}]},onsubmit:function(){var S=this.toJSON(),Q,R,T;t.undoManager.transact(function(){var U=S.type;m(N,function(V){t.dom.setAttrib(V,"scope",S.scope);t.dom.setStyles(V,{height:D(S.height)});if(U!=V.parentNode.nodeName.toLowerCase()){Q=P.getParent(V,"table");R=V.parentNode;T=P.select(U,Q)[0];if(!T){T=P.create(U);if(Q.firstChild){Q.insertBefore(T,Q.firstChild)}else{Q.appendChild(T)}}T.appendChild(V);if(!R.hasChildNodes()){P.remove(R)}}J(V);if(S.align){t.formatter.apply("align"+S.align,{},V)}});t.focus()})}})}function F(K){return function(){t.execCommand(K)}}function A(O,N){var P,K,M;M='<table id="__mce"><tbody>';for(P=0;P<N;P++){M+="<tr>";for(K=0;K<O;K++){M+="<td>"+(k.ie?" ":"<br>")+"</td>"}M+="</tr>"}M+="</tbody></table>";t.insertContent(M);var L=t.dom.get("__mce");t.dom.setAttrib(L,"id",null);return L}function H(L,K){function M(){L.disabled(!t.dom.getParent(t.selection.getStart(),K));t.selection.selectorChanged(K,function(N){L.disabled(!N)})}if(t.initialized){M()}else{t.on("init",M)}}function B(){H(this,"table")}function z(){H(this,"td,th")}function u(){var L="";L='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var M=0;M<10;M++){L+="<tr>";for(var K=0;K<10;K++){L+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(M*10+K)+'" href="#" data-mce-x="'+K+'" data-mce-y="'+M+'" '+(K+M===0?' class="mce-active"':"")+"></a></td>"}L+="</tr>"}L+="</table>";L+='<div class="mce-text-center" role="presentation">1 x 1</div>';return L}function y(M,K,L){var Q=L.getEl().getElementsByTagName("table")[0];var S=L.parent().rel,O,N,R,P;if(L.isRtl()||S=="tl-tr"){for(N=9;N>=0;N--){for(O=0;O<10;O++){P=Q.rows[N].childNodes[O].firstChild;t.dom.toggleClass(P,"mce-active",O>=M&&N<=K);if(O>=M&&N<=K){R=P}}}M=9-M;Q.nextSibling.innerHTML=M+" x "+(K+1)}else{for(N=0;N<10;N++){for(O=0;O<10;O++){P=Q.rows[N].childNodes[O].firstChild;t.dom.toggleClass(P,"mce-active",O<=M&&N<=K);if(O<=M&&N<=K){R=P}}}Q.nextSibling.innerHTML=(M+1)+" x "+(K+1)}return R.parentNode}if(t.settings.table_grid===false){t.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onclick:s})}else{t.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",ariaHideMenu:true,onclick:function(K){if(K.aria){this.parent().hideAll();K.stopImmediatePropagation();s()}},onhide:function(){var K=this.menu.items()[0].getEl().getElementsByTagName("a");t.dom.removeClass(K,"mce-active");t.dom.addClass(K[0],"mce-active")},menu:[{type:"container",html:u(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(M){var L=M.target,K,N;if(L.tagName.toUpperCase()=="A"){K=parseInt(L.getAttribute("data-mce-x"),10);N=parseInt(L.getAttribute("data-mce-y"),10);if(K!==this.lastX||N!==this.lastY){y(K,N,M.control);this.lastX=K;this.lastY=N}}},onkeydown:function(M){var K=this.lastX,N=this.lastY,L;switch(M.keyCode){case 37:if(K>0){K--;L=true}break;case 39:L=true;if(K<9){K++}break;case 38:L=true;if(N>0){N--}break;case 40:L=true;if(N<9){N++}break}if(L){M.preventDefault();M.stopPropagation();y(K,N,M.control).focus();this.lastX=K;this.lastY=N}},onclick:function(K){if(K.target.tagName.toUpperCase()=="A"){K.preventDefault();K.stopPropagation();this.parent().cancel();A(this.lastX+1,this.lastY+1)}}}]})}t.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:B,onclick:s});t.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:B,cmd:"mceTableDelete"});t.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:F("mceTableCellProps"),onPostRender:z},{text:"Merge cells",onclick:F("mceTableMergeCells"),onPostRender:z},{text:"Split cell",onclick:F("mceTableSplitCells"),onPostRender:z}]});t.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:F("mceTableInsertRowBefore"),onPostRender:z},{text:"Insert row after",onclick:F("mceTableInsertRowAfter"),onPostRender:z},{text:"Delete row",onclick:F("mceTableDeleteRow"),onPostRender:z},{text:"Row properties",onclick:F("mceTableRowProps"),onPostRender:z},{text:"-"},{text:"Cut row",onclick:F("mceTableCutRow"),onPostRender:z},{text:"Copy row",onclick:F("mceTableCopyRow"),onPostRender:z},{text:"Paste row before",onclick:F("mceTablePasteRowBefore"),onPostRender:z},{text:"Paste row after",onclick:F("mceTablePasteRowAfter"),onPostRender:z}]});t.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:F("mceTableInsertColBefore"),onPostRender:z},{text:"Insert column after",onclick:F("mceTableInsertColAfter"),onPostRender:z},{text:"Delete column",onclick:F("mceTableDeleteCol"),onPostRender:z}]});var I=[];m("inserttable tableprops deletetable | cell row column".split(" "),function(K){if(K=="|"){I.push({text:"-"})}else{I.push(t.menuItems[K])}});t.addButton("table",{type:"menubutton",title:"Table",menu:I});if(!k.isIE){t.on("click",function(K){K=K.target;if(K.nodeName==="TABLE"){t.selection.select(K);t.nodeChanged()}})}C.quirks=new o(t);t.on("Init",function(){r=t.windowManager;C.cellSelection=new q(t)});m({mceTableSplitCells:function(K){K.split()},mceTableMergeCells:function(L){var M,N,K;K=t.dom.getParent(t.selection.getStart(),"th,td");if(K){M=K.rowSpan;N=K.colSpan}if(!t.dom.select("td.mce-item-selected,th.mce-item-selected").length){E(L,K)}else{L.merge()}},mceTableInsertRowBefore:function(K){K.insertRow(true)},mceTableInsertRowAfter:function(K){K.insertRow()},mceTableInsertColBefore:function(K){K.insertCol(true)},mceTableInsertColAfter:function(K){K.insertCol()},mceTableDeleteCol:function(K){K.deleteCols()},mceTableDeleteRow:function(K){K.deleteRows()},mceTableCutRow:function(K){G=K.cutRows()},mceTableCopyRow:function(K){G=K.copyRows()},mceTablePasteRowBefore:function(K){K.pasteRows(G,true)},mceTablePasteRowAfter:function(K){K.pasteRows(G)},mceTableDelete:function(K){K.deleteTable()}},function(L,K){t.addCommand(K,function(){var M=new p(t);if(M){L(M);t.execCommand("mceRepaint");C.cellSelection.clear()}})});m({mceInsertTable:function(){s()},mceTableRowProps:x,mceTableCellProps:v},function(L,K){t.addCommand(K,function(M,N){L(N)})})}j.add("table",l)});a(["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Plugin"])})(this);